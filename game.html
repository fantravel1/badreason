<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Test your critical thinking skills! Identify logical fallacies in this endless simulation game.">
  <title>Fallacy Detective - BadReason.com</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900|Merriweather:700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inter:400,600|Open+Sans:400,600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="icon" href="favicon.ico">
  <style>
    /* Game Specific Styles */
    .game-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 6rem 1.5rem 4rem;
      min-height: 100vh;
    }

    .game-header {
      text-align: center;
      margin-bottom: 3rem;
      animation: fadeInUp 0.6s ease-out;
    }

    .game-header h1 {
      font-size: 3rem;
      color: var(--text-color);
      margin-bottom: 0.5rem;
    }

    .game-header p {
      font-size: 1.2rem;
      color: var(--accent-teal);
    }

    /* Stats Bar */
    .stats-bar {
      display: flex;
      justify-content: space-around;
      background: white;
      border-radius: var(--border-radius);
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: var(--box-shadow);
      flex-wrap: wrap;
      gap: 1rem;
    }

    .stat {
      text-align: center;
      flex: 1;
      min-width: 120px;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent-red);
      display: block;
    }

    .stat-label {
      font-size: 0.9rem;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 0.25rem;
    }

    /* Game Card */
    .game-card {
      background: white;
      border-radius: var(--border-radius);
      padding: 2.5rem;
      box-shadow: var(--box-shadow);
      margin-bottom: 2rem;
      animation: slideIn 0.5s ease-out;
    }

    .scenario-context {
      display: inline-block;
      background-color: var(--accent-teal);
      color: white;
      padding: 0.4rem 1rem;
      border-radius: 50px;
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 1.5rem;
    }

    .argument-text {
      font-size: 1.3rem;
      line-height: 1.8;
      color: var(--text-color);
      background: #f8f9fa;
      padding: 2rem;
      border-left: 4px solid var(--accent-red);
      border-radius: 0 var(--border-radius) var(--border-radius) 0;
      margin-bottom: 2rem;
      font-style: italic;
    }

    .question {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--text-color);
      margin-bottom: 1.5rem;
      text-align: center;
    }

    /* Answer Options */
    .answer-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .answer-btn {
      background: white;
      border: 2px solid var(--light-gray);
      padding: 1.2rem;
      border-radius: var(--border-radius);
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-color);
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .answer-btn:hover {
      border-color: var(--accent-teal);
      background: rgba(125, 157, 156, 0.1);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .answer-btn:active {
      transform: translateY(0);
    }

    .answer-btn.correct {
      background: #4caf50;
      color: white;
      border-color: #4caf50;
    }

    .answer-btn.incorrect {
      background: #f44336;
      color: white;
      border-color: #f44336;
    }

    .answer-btn.disabled {
      pointer-events: none;
      opacity: 0.6;
    }

    /* Feedback */
    .feedback {
      display: none;
      padding: 1.5rem;
      border-radius: var(--border-radius);
      margin-top: 1.5rem;
      animation: slideIn 0.4s ease-out;
    }

    .feedback.show {
      display: block;
    }

    .feedback.correct {
      background: #e8f5e9;
      border: 2px solid #4caf50;
      color: #2e7d32;
    }

    .feedback.incorrect {
      background: #ffebee;
      border: 2px solid #f44336;
      color: #c62828;
    }

    .feedback-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .feedback-text {
      font-size: 1rem;
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .feedback-explanation {
      background: rgba(255, 255, 255, 0.7);
      padding: 1rem;
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.6;
      margin-top: 1rem;
    }

    /* Next Button */
    .next-btn {
      display: none;
      width: 100%;
      padding: 1rem 2rem;
      background: var(--accent-red);
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 1rem;
    }

    .next-btn.show {
      display: block;
      animation: slideIn 0.4s ease-out;
    }

    .next-btn:hover {
      background: var(--accent-teal);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(125, 157, 156, 0.4);
    }

    /* Start Screen */
    .start-screen {
      text-align: center;
      background: white;
      border-radius: var(--border-radius);
      padding: 3rem;
      box-shadow: var(--box-shadow);
      animation: fadeInUp 0.6s ease-out;
    }

    .start-screen h2 {
      font-size: 2.5rem;
      color: var(--text-color);
      margin-bottom: 1.5rem;
    }

    .start-screen p {
      font-size: 1.1rem;
      color: #666;
      line-height: 1.8;
      margin-bottom: 1rem;
    }

    .difficulty-selector {
      margin: 2rem 0;
      padding: 2rem;
      background: #f8f9fa;
      border-radius: var(--border-radius);
    }

    .difficulty-selector h3 {
      font-size: 1.3rem;
      margin-bottom: 1rem;
      color: var(--text-color);
    }

    .difficulty-options {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .difficulty-btn {
      padding: 0.8rem 2rem;
      background: white;
      border: 2px solid var(--light-gray);
      border-radius: 50px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .difficulty-btn:hover {
      border-color: var(--accent-teal);
      background: rgba(125, 157, 156, 0.1);
    }

    .difficulty-btn.selected {
      background: var(--accent-teal);
      color: white;
      border-color: var(--accent-teal);
    }

    .start-game-btn {
      margin-top: 2rem;
      padding: 1rem 3rem;
      background: var(--accent-red);
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 1.2rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .start-game-btn:hover {
      background: var(--accent-teal);
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(125, 157, 156, 0.4);
    }

    /* Streak Indicator */
    .streak-indicator {
      background: linear-gradient(135deg, #ff6b6b, #f06292);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-weight: 600;
      display: inline-block;
      margin-bottom: 1rem;
      animation: pulse 1s infinite;
    }

    .streak-indicator i {
      margin-right: 0.5rem;
    }

    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }

    /* Mobile Optimizations */
    @media (max-width: 768px) {
      .game-container {
        padding: 5rem 1rem 2rem;
      }

      .game-header h1 {
        font-size: 2rem;
      }

      .game-header p {
        font-size: 1rem;
      }

      .game-card {
        padding: 1.5rem;
      }

      .argument-text {
        font-size: 1.1rem;
        padding: 1.5rem;
      }

      .answer-options {
        grid-template-columns: 1fr;
      }

      .stats-bar {
        padding: 1rem;
      }

      .stat {
        min-width: 80px;
      }

      .stat-value {
        font-size: 1.5rem;
      }

      .stat-label {
        font-size: 0.75rem;
      }

      .start-screen {
        padding: 2rem 1.5rem;
      }

      .start-screen h2 {
        font-size: 1.8rem;
      }

      .difficulty-options {
        flex-direction: column;
      }

      .difficulty-btn {
        width: 100%;
      }
    }

    @media (max-width: 480px) {
      .game-header h1 {
        font-size: 1.75rem;
      }

      .argument-text {
        font-size: 1rem;
        padding: 1rem;
      }

      .question {
        font-size: 1rem;
      }

      .answer-btn {
        padding: 1rem;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container nav-content">
      <a href="index.html" class="logo">BadReason.com</a>
      <button class="mobile-menu-toggle" aria-label="Toggle mobile menu">
        <i class="fas fa-bars"></i>
      </button>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="fallacies.html">Fallacy Library</a></li>
        <li><a href="game.html" class="active">Fallacy Detective</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </div>
  </nav>
  <div class="nav-overlay"></div>

  <!-- Game Container -->
  <div class="game-container">
    <!-- Start Screen -->
    <div id="start-screen" class="start-screen">
      <h2><i class="fas fa-search"></i> Fallacy Detective</h2>
      <p>Welcome to Fallacy Detective, an endless simulation game where you identify logical fallacies in real-world arguments!</p>
      <p>Read each argument carefully and select which logical fallacy is being used. The game gets progressively harder as you build your streak!</p>

      <div class="difficulty-selector">
        <h3>Select Starting Difficulty:</h3>
        <div class="difficulty-options">
          <button class="difficulty-btn" data-difficulty="easy">Easy</button>
          <button class="difficulty-btn selected" data-difficulty="medium">Medium</button>
          <button class="difficulty-btn" data-difficulty="hard">Hard</button>
          <button class="difficulty-btn" data-difficulty="mixed">Mixed</button>
        </div>
      </div>

      <button class="start-game-btn" onclick="startGame()">
        <i class="fas fa-play"></i> Start Game
      </button>

      <div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid var(--light-gray);">
        <h3>How to Play:</h3>
        <ul style="text-align: left; max-width: 500px; margin: 1rem auto; line-height: 2;">
          <li>Read the argument presented</li>
          <li>Identify the logical fallacy being used</li>
          <li>Select your answer from the options</li>
          <li>Build your streak and score points!</li>
          <li>Learn from detailed explanations after each answer</li>
        </ul>
      </div>
    </div>

    <!-- Game Header -->
    <div id="game-header" class="game-header" style="display: none;">
      <h1><i class="fas fa-search"></i> Fallacy Detective</h1>
      <p>Identify the logical fallacy in each argument</p>
    </div>

    <!-- Stats Bar -->
    <div id="stats-bar" class="stats-bar" style="display: none;">
      <div class="stat">
        <span class="stat-value" id="score">0</span>
        <span class="stat-label">Score</span>
      </div>
      <div class="stat">
        <span class="stat-value" id="streak">0</span>
        <span class="stat-label">Streak</span>
      </div>
      <div class="stat">
        <span class="stat-value" id="correct">0</span>
        <span class="stat-label">Correct</span>
      </div>
      <div class="stat">
        <span class="stat-value" id="total">0</span>
        <span class="stat-label">Total</span>
      </div>
    </div>

    <!-- Game Card -->
    <div id="game-card" class="game-card" style="display: none;">
      <div id="streak-indicator" class="streak-indicator" style="display: none;">
        <i class="fas fa-fire"></i> Streak: <span id="streak-count">0</span>
      </div>

      <span class="scenario-context" id="scenario-context">Context</span>

      <div class="argument-text" id="argument-text">
        Argument will appear here...
      </div>

      <p class="question">Which logical fallacy is being used?</p>

      <div class="answer-options" id="answer-options">
        <!-- Answer buttons will be generated here -->
      </div>

      <div id="feedback" class="feedback">
        <div class="feedback-title"></div>
        <div class="feedback-text"></div>
        <div class="feedback-explanation"></div>
      </div>

      <button class="next-btn" id="next-btn" onclick="nextQuestion()">
        Next Question <i class="fas fa-arrow-right"></i>
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer-content">
      <nav class="footer-nav">
        <a href="index.html">Home</a>
        <a href="fallacies.html">Fallacy Library</a>
        <a href="game.html">Fallacy Detective</a>
        <a href="about.html">About</a>
      </nav>
      <div class="copyright">&copy; 2025 BadReason.com. All rights reserved.</div>
    </div>
  </footer>

  <!-- Include fallacy data -->
  <script src="fallacy-data.js"></script>

  <script>
    // Game State
    let gameState = {
      score: 0,
      streak: 0,
      correct: 0,
      total: 0,
      currentScenario: null,
      difficulty: 'medium',
      bestStreak: 0
    };

    // Initialize mobile menu
    document.addEventListener('DOMContentLoaded', () => {
      setupMobileMenu();
      loadDifficultyButtons();
    });

    function setupMobileMenu() {
      const menuToggle = document.querySelector('.mobile-menu-toggle');
      const navLinks = document.querySelector('.nav-links');
      const navOverlay = document.querySelector('.nav-overlay');

      if (!menuToggle) return;

      const toggleMenu = () => {
        navLinks.classList.toggle('active');
        navOverlay.classList.toggle('active');
        const icon = menuToggle.querySelector('i');
        if (icon) {
          icon.classList.toggle('fa-bars');
          icon.classList.toggle('fa-times');
        }
      };

      menuToggle.addEventListener('click', toggleMenu);
      navOverlay.addEventListener('click', toggleMenu);

      navLinks.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
          if (navLinks.classList.contains('active')) {
            toggleMenu();
          }
        });
      });
    }

    function loadDifficultyButtons() {
      const difficultyBtns = document.querySelectorAll('.difficulty-btn');
      difficultyBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          difficultyBtns.forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');
          gameState.difficulty = btn.dataset.difficulty;
        });
      });
    }

    function startGame() {
      document.getElementById('start-screen').style.display = 'none';
      document.getElementById('game-header').style.display = 'block';
      document.getElementById('stats-bar').style.display = 'flex';
      document.getElementById('game-card').style.display = 'block';

      gameState = {
        score: 0,
        streak: 0,
        correct: 0,
        total: 0,
        currentScenario: null,
        difficulty: gameState.difficulty,
        bestStreak: 0
      };

      updateStats();
      loadQuestion();
    }

    function loadQuestion() {
      // Hide feedback and next button
      document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect');
      document.getElementById('next-btn').classList.remove('show');

      // Get a random scenario
      let scenario;
      if (gameState.difficulty === 'mixed') {
        scenario = fallacyRepository.getRandomScenario();
      } else {
        const scenarios = fallacyRepository.getScenariosByDifficulty(gameState.difficulty);
        scenario = scenarios[Math.floor(Math.random() * scenarios.length)];
      }

      gameState.currentScenario = scenario;

      // Display the scenario
      document.getElementById('scenario-context').textContent = scenario.context;
      document.getElementById('argument-text').textContent = '"' + scenario.argument + '"';

      // Generate answer options
      generateAnswerOptions(scenario);

      // Update streak indicator
      if (gameState.streak >= 3) {
        document.getElementById('streak-indicator').style.display = 'block';
        document.getElementById('streak-count').textContent = gameState.streak;
      } else {
        document.getElementById('streak-indicator').style.display = 'none';
      }
    }

    function generateAnswerOptions(scenario) {
      const optionsContainer = document.getElementById('answer-options');
      optionsContainer.innerHTML = '';

      // Get the correct fallacy
      const correctFallacy = fallacyRepository.getFallacyById(scenario.fallacy);

      // Get 3 random incorrect options
      const incorrectOptions = [];
      const allFallacies = fallacyRepository.fallacies.filter(f => f.id !== scenario.fallacy);

      while (incorrectOptions.length < 3) {
        const random = allFallacies[Math.floor(Math.random() * allFallacies.length)];
        if (!incorrectOptions.includes(random)) {
          incorrectOptions.push(random);
        }
      }

      // Combine and shuffle options
      const options = [correctFallacy, ...incorrectOptions];
      shuffleArray(options);

      // Create buttons
      options.forEach(fallacy => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.textContent = fallacy.name;
        btn.onclick = () => selectAnswer(fallacy.id);
        optionsContainer.appendChild(btn);
      });
    }

    function selectAnswer(selectedId) {
      const isCorrect = selectedId === gameState.currentScenario.fallacy;
      gameState.total++;

      // Disable all buttons
      const buttons = document.querySelectorAll('.answer-btn');
      buttons.forEach(btn => {
        btn.classList.add('disabled');
        const btnText = btn.textContent;
        const correctFallacy = fallacyRepository.getFallacyById(gameState.currentScenario.fallacy);

        if (btnText === correctFallacy.name) {
          btn.classList.add('correct');
        } else if (btn.textContent === fallacyRepository.getFallacyById(selectedId).name && !isCorrect) {
          btn.classList.add('incorrect');
        }
      });

      // Update stats
      if (isCorrect) {
        gameState.correct++;
        gameState.streak++;
        gameState.score += 10 + (gameState.streak * 2); // Bonus points for streaks
        if (gameState.streak > gameState.bestStreak) {
          gameState.bestStreak = gameState.streak;
        }
      } else {
        gameState.streak = 0;
      }

      updateStats();
      showFeedback(isCorrect);
      document.getElementById('next-btn').classList.add('show');
    }

    function showFeedback(isCorrect) {
      const feedback = document.getElementById('feedback');
      const correctFallacy = fallacyRepository.getFallacyById(gameState.currentScenario.fallacy);

      feedback.classList.add('show', isCorrect ? 'correct' : 'incorrect');

      const title = feedback.querySelector('.feedback-title');
      const text = feedback.querySelector('.feedback-text');
      const explanation = feedback.querySelector('.feedback-explanation');

      if (isCorrect) {
        title.innerHTML = '<i class="fas fa-check-circle"></i> Correct!';
        text.textContent = `Great job! This is indeed a ${correctFallacy.name} fallacy.`;
      } else {
        title.innerHTML = '<i class="fas fa-times-circle"></i> Incorrect';
        text.textContent = `The correct answer is ${correctFallacy.name}.`;
      }

      explanation.innerHTML = `<strong>Explanation:</strong> ${correctFallacy.definition}<br><br><strong>Tip:</strong> ${correctFallacy.tips}`;
    }

    function nextQuestion() {
      loadQuestion();
    }

    function updateStats() {
      document.getElementById('score').textContent = gameState.score;
      document.getElementById('streak').textContent = gameState.streak;
      document.getElementById('correct').textContent = gameState.correct;
      document.getElementById('total').textContent = gameState.total;
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
  </script>
</body>
</html>
